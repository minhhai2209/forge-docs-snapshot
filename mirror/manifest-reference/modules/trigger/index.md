# Trigger

The `trigger` module invokes a function or calls a remote backend when an
[Atlassian app event](/platform/forge/events-reference/product_events/),
[Forge app event](/platform/forge/events-reference/app-events/),
[Forge app lifecycle event](/platform/forge/events-reference/life-cycle/),
or [data security policy event](/platform/forge/events-reference/data-security-policy-events/)
is fired.

## Properties

| Property | Type | Required | Description |
| --- | --- | --- | --- |
| `key` | `string` | Yes | A key for the module, which other modules can refer to. Must be unique within the manifest.  *Regex:* `^[a-zA-Z0-9_-]+$` |
| `function` | `string` | Required if using [triggers](/platform/forge/manifest-reference/modules/trigger/). | A reference to the function module that defines the module. |
| `endpoint` | `string` |  | A reference to the `endpoint` that specifies the remote back end that receives the event if you are using [Forge Remote](/platform/forge/remote) to integrate with a remote back end.  Required if no `function` is specified. |
| `events` | `Array<string>` | Yes | A list of [Atlassian app events](/platform/forge/events-reference/) that trigger the function or endpoint. |
| `filter` | [Filter](#filter-reference) | No | A set of options to prevent invoking a function or endpoint. |

### Filter reference

| Property | Type | Required | Description |
| --- | --- | --- | --- |
| `ignoreSelf` | `boolean` | The `filter` property must have either `ignoreSelf` or `expression` or both of them defined. | Ignore self-generated events.  For example, an app updates an issue and ignores the `avi:jira:updated:issue` event that is generated by this operation.  **Note that currently `ignoreSelf` only works with [Jira events](/platform/forge/events-reference/jira).** |
| `expression` | `string` | An expression used to [filter out unwanted events](/platform/forge/events-reference/product_events/#filter-out-product-events).  For example, instead of listening to all `avi:jira:updated:issue` events, an app can listen to events only from specific projects. |
| `onError` | `enum` | No | Specify what should happen when an error occurs while evaluating the expression. You can either invoke a function or call a remote backend and publish [app logs](/platform/forge/view-app-logs).  Can be used only with the `expression` property.  The possible values are:   * (default) `IGNORE_AND_LOG` - don't invoke a function or call a remote backend; publish a log. * `IGNORE` - don't invoke a function or call a remote backend; don't publish a log. * `RECEIVE_AND_LOG` - invoke a function or call a remote backend; publish a log. * `RECEIVE` - invoke a function or call a remote backend; don't publish a log. |

## Function arguments

When your trigger function is invoked, it receives two arguments:

```
```
1
2
```



```
export async function myTriggerFunction(event, context) {
  // Handle the event
}
```
```

### Arguments

* **event:** A payload detailing the event that occurred. The structure depends on the specific [event type](/platform/forge/events-reference/). See the documentation for each event for detailed payload descriptions.
* **context:** Additional information about the context the event occurred in. Refer to [Context Schema](/platform/forge/function-reference/arguments/#context-schema) for complete details.

#### Context object properties

The `context` object contains information about the environment and installation where the trigger was invoked:

| Property | Type | Description |
| --- | --- | --- |
| `principal` | `Principal | undefined` | The principal containing the Atlassian ID of the user that interacted with the component. |
| `installContext` | `string` | The ARI identifying the cloud or Atlassian app context of this component installation. |
| `workspaceId` | `string | undefined` | The ID of the workspace on which the extension is working. |
| `license` | `License | undefined` | Contains information about the license of the app. This field is only present for paid apps in the production environment.  `license` is `undefined` for free apps, apps in `DEVELOPMENT` and `STAGING` environments, and apps that are not listed on the Atlassian Marketplace. |
| `installation` | `Installation | undefined` | A summary of the app installation, including the installation ARI and the contexts where the app is installed. |

## Example

```
```
1
2
```



```
modules:
  trigger:
    - key: issue-updated-trigger-with-ignore-self-and-expression
      function: main
      events:
        - avi:jira:updated:issue
      filter:
        ignoreSelf: true
        expression: event.issue.fields?.issueType.name == 'Bug'
        onError: RECEIVE_AND_LOG
  function:
    - key: main
      handler: index.run
```
```
